---
title: External content handling
created_at: 12/20/2025
updated_at: 12/20/2025
keywords:
  - external
  - content
  - paste
  - drop
  - embed
  - files
status: published
date: 12/20/2025
order: 14
---

The external content handling system processes content from outside the editor, such as pasted text, dropped files, or embedded URLs. It uses a handler registration pattern where you register handlers for specific content types (text, files, URLs, SVG, embeds).

When external content arrives, the editor routes it to the appropriate handler, which transforms the content into shapes or assets. This system powers clipboard operations, drag-and-drop, and direct content insertion through the editor API.

## How it works

External content handling involves two complementary systems: content handlers and asset handlers. Content handlers transform external content into shapes on the canvas. Asset handlers process external assets like files and URLs into asset records that can be referenced by shapes.

When content arrives, the editor calls `putExternalContent` with a content object describing the type and data. The editor looks up the registered handler for that content type and invokes it. The handler processes the content and typically creates shapes, updates the selection, or inserts assets into the document.

Asset handlers work similarly but focus on creating asset records rather than shapes. When an image file is dropped on the canvas, for example, the file handler extracts metadata, uploads the file using the configured upload function, and returns an asset record with the uploaded URL. Shape creation happens separately in the content handler.

## Content types

The system supports several content types, each with its own handler signature.

### Text

Text content represents plain text, HTML, or mixed content from clipboard operations. The handler receives the text string and optional HTML markup. The default implementation creates text shapes with appropriate formatting, detecting right-to-left languages and handling multi-line text intelligently.

```typescript
editor.registerExternalContentHandler('text', async (content) => {
	const { text, html, point } = content
	// Create text shape at the specified point
	editor.createShapes([
		{
			type: 'text',
			x: point.x,
			y: point.y,
			props: { text },
		},
	])
})
```

### Files

File content represents one or more files dropped onto the canvas or selected through file inputs. The handler receives an array of File objects and an optional point. The default implementation validates file types and sizes, creates temporary asset previews, uploads the files, and creates image or video shapes.

```typescript
editor.registerExternalContentHandler('files', async (content) => {
	const { files, point } = content
	// Process files and create appropriate shapes
})
```

### URLs

URL content represents a single URL to be inserted into the document. The handler receives the URL string and point. The default implementation attempts to create an embed if the URL matches known embed patterns, falling back to creating a bookmark shape with fetched metadata.

### SVG text

SVG text content represents raw SVG markup to be inserted as an image. The handler receives the SVG string and creates an asset from it, then creates an image shape referencing that asset.

### Embeds

Embed content represents embeddable content like YouTube videos or Twitter posts. The handler receives the URL and embed definition with dimensions. The default implementation creates an embed shape with the appropriate size and URL.

### Special content types

The system also handles tldraw-specific and excalidraw-specific content. These handlers process serialized content from other tldraw editors or Excalidraw, preserving shapes, styles, and structure.

## Asset handling

Asset handlers complement content handlers by processing external assets into asset records. The two asset handler types are file and URL.

The file asset handler receives a File object and optional asset ID. It extracts metadata like dimensions and file size, uploads the file using `editor.uploadAsset`, and returns an asset record with the uploaded URL. The default implementation validates file types and enforces size limits.

The URL asset handler receives a URL string and fetches metadata for bookmark creation. It attempts to extract Open Graph metadata like title, description, and preview image from the URL's HTML.

Register asset handlers using `registerExternalAssetHandler`:

```typescript
editor.registerExternalAssetHandler('file', async (externalAsset) => {
	const { file, assetId } = externalAsset
	// Extract metadata and upload
	const result = await editor.uploadAsset(assetInfo, file)
	return AssetRecordType.create({
		id: assetId,
		type: 'image',
		props: {
			src: result.src,
			w: dimensions.w,
			h: dimensions.h,
			// ... other metadata
		},
	})
})
```

## API methods

The primary methods for external content handling are `registerExternalContentHandler`, `registerExternalAssetHandler`, `putExternalContent`, and `getAssetForExternalContent`.

`registerExternalContentHandler` registers a handler function for a specific content type. The handler receives a content object with the type, data, and optional point. Handlers can be removed by passing null.

`registerExternalAssetHandler` registers a handler function for a specific asset type. The handler receives asset information and returns a promise resolving to an asset record.

`putExternalContent` processes external content by calling the appropriate registered handler. This method is typically called by clipboard and drag-and-drop event handlers, but can be called directly to programmatically insert content:

```typescript
editor.putExternalContent({
	type: 'text',
	text: 'Hello, world!',
	point: { x: 100, y: 100 },
})
```

`getAssetForExternalContent` processes external asset information by calling the appropriate asset handler. This method is used when assets need to be created separately from shapes.

## Extension points

You can customize external content handling by registering your own handlers. This allows you to control how content is processed, add validation, integrate with external services, or support custom content types.

Replace a default handler by registering a new one with the same type. Your handler receives the content object and can create shapes, update the document, or perform any other operations. You can also call the default handler implementation from your custom handler to extend rather than replace the default behavior.

The default handlers are registered in `registerDefaultExternalContentHandlers` in the `@tldraw/tldraw` package. This function is called during editor initialization and can serve as a reference for implementing custom handlers.

## Related examples

- **[External content sources](https://github.com/tldraw/tldraw/tree/main/apps/examples/src/examples/external-content-sources)** - Handle different types of content when pasting into tldraw, including custom HTML content handling.
- **[Custom paste behavior](https://github.com/tldraw/tldraw/tree/main/apps/examples/src/examples/custom-paste)** - Change how pasting works by registering an external content handler for specific shape types.
- **[Drag and drop tray](https://github.com/tldraw/tldraw/tree/main/apps/examples/src/examples/drag-and-drop-tray)** - Create a drag and drop tray with items that can be dragged onto the canvas to create shapes.
- **[Hosted images](https://github.com/tldraw/tldraw/tree/main/apps/examples/src/examples/hosted-images)** - Handle images uploaded by the user using a custom asset store.
