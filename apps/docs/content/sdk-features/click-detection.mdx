---
title: Click detection
created_at: 12/20/2025
updated_at: 12/20/2025
keywords:
  - click
  - double-click
  - triple-click
  - quadruple-click
  - pointer
  - ClickManager
  - multi-click
status: published
date: 12/20/2025
order: 5
---

In tldraw, the click detection system lets you respond to double, triple, and quadruple clicks. The `ClickManager` tracks consecutive pointer down events using a state machine, dispatching click events when timing and distance thresholds are met.

This powers text editing features like word selection on double-click and paragraph selection on triple-click. You can use these events to add custom multi-click behaviors in your own shapes and tools.

## How it works

When a pointer down event occurs, the manager either starts a new sequence or advances to the next click level. Each state has a timeout that determines how long to wait for the next click before settling on the current level.

Two timeout durations control the detection speed. The first click uses `doubleClickDurationMs` (450ms by default), giving users time to initiate a double-click sequence. Subsequent clicks use the shorter `multiClickDurationMs` (200ms by default), requiring faster input for triple and quadruple clicks. This pattern matches common operating system behavior.

### State transitions

The click state machine progresses through these states:

- `idle`: No active click sequence
- `pendingDouble`: First click registered, waiting for second click
- `pendingTriple`: Second click registered, waiting for third click
- `pendingQuadruple`: Third click registered, waiting for fourth click
- `pendingOverflow`: Fourth click registered, waiting for fifth click
- `overflow`: More than four clicks detected

When a pointer down event arrives, the state advances to the next pending state and sets a timeout. If the timeout expires before the next click, the manager dispatches a settle event for the current click level and returns to idle. If another pointer down arrives before the timeout, the state advances and a click event is dispatched immediately.

### Distance validation

Consecutive clicks must occur within a maximum distance of 40 pixels (screen space). If pointer down events are farther apart, the click sequence resets to idle.

### Click event phases

Click events are dispatched with three possible phases:

- `down`: Fired immediately when a multi-click is detected during pointer down
- `up`: Fired during pointer up for multi-clicks that are still pending
- `settle`: Fired when the timeout expires without further clicks

The phase system lets tools and shapes respond at different points in the click sequence. For example, the hand tool waits for the `settle` phase before zooming in—this avoids triggering a zoom if the user is about to triple-click.

### Movement cancellation

If the pointer moves too far during a pending click sequence, the system cancels the sequence and returns to idle. This prevents multi-click detection during click-drag operations. The movement threshold differs for coarse pointers (touchscreens) and fine pointers (mouse, stylus).

## Handling click events

Tools receive click events through handler methods defined in the `TLEventHandlers` interface:

```tsx
import { StateNode, TLClickEventInfo } from 'tldraw'

export class MyTool extends StateNode {
	static override id = 'my-tool'

	override onDoubleClick(info: TLClickEventInfo) {
		if (info.phase !== 'settle') return

		// Zoom in at the click location
		this.editor.zoomIn(info.point, { animation: { duration: 200 } })
	}

	override onTripleClick(info: TLClickEventInfo) {
		// Handle triple clicks
	}

	override onQuadrupleClick(info: TLClickEventInfo) {
		// Handle quadruple clicks
	}
}
```

Shape utilities handle double-clicks through the `onDoubleClick` method. The return value applies changes to the shape:

```tsx
import { ShapeUtil, TLBaseShape } from 'tldraw'

type MyShape = TLBaseShape<'my-shape', { expanded: boolean }>

export class MyShapeUtil extends ShapeUtil<MyShape> {
	// ... other methods

	override onDoubleClick(shape: MyShape) {
		// Return a partial to update the shape
		return {
			id: shape.id,
			type: shape.type,
			props: { expanded: !shape.props.expanded },
		}
	}
}
```

The `TLClickEventInfo` type includes these properties:

```typescript
type TLClickEventInfo = {
	type: 'click'
	name: 'double_click' | 'triple_click' | 'quadruple_click'
	point: VecLike
	pointerId: number
	button: number
	phase: 'down' | 'up' | 'settle'
	target: 'canvas' | 'selection' | 'shape' | 'handle'
	shape?: TLShape // present when target is 'shape' or 'handle'
	// Modifier keys
	shiftKey: boolean
	altKey: boolean
	ctrlKey: boolean
	metaKey: boolean
	accelKey: boolean
}
```

## Timing configuration

Click timing is configured through the editor's options:

- `doubleClickDurationMs`: Time window for the first click to become a double-click (default: 450ms)
- `multiClickDurationMs`: Time window for subsequent clicks in the sequence (default: 200ms)

## Key files

- `/packages/editor/src/lib/editor/managers/ClickManager/ClickManager.ts` — The click detection state machine
- `/packages/editor/src/lib/editor/types/event-types.ts` — Event type definitions including `TLClickEventInfo`

## Related examples

- **[Canvas events](https://github.com/tldraw/tldraw/tree/main/apps/examples/src/examples/canvas-events)** — Log pointer events including click sequences to understand the event flow.
- **[Custom shape](https://github.com/tldraw/tldraw/tree/main/apps/examples/src/examples/custom-shape)** — Implement onDoubleClick and other click handlers in custom shapes.
