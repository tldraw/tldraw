---
alwaysApply: true
---

Most tests in tldraw are written using Vitest. End-to-end tests are written using playwright.

## Vitest tests

When writing unit-style Vitest tests, test files should be named after the file they are testing.
For example, `src/lib/LicenseManager.ts` should be tested in `src/lib/LicenseManager.test.ts`.

When writing more integration-style Vitest test that touch several files, they should live in a separate `src/test/the-thing-you-are-testing.test.ts` file.
For example, selection logic cuts across many files, so it's tested in `src/test/selection.test.ts`.

When testing the editor, if you need tldraw's default shapes and tools, write your tests in the tldraw workspace, not the editor workspace.

Tests for a specific package should be run using `yarn test run` within that workspace's directory - ie in `packages/editor` to run editor tests.
`yarn test` is an alias for `yarn run -T vitest`.
You can filter down the results using other arguments to `yarn test run` as needed.
Running `yarn test` from the repo root will run all the tests for the entire repo.
This can be slow, and can't be filtered as usual, so don't use it unless you have a good reason.
